import React, { useState } from "react";
import "./ProductExclusion.css";
import "./Service.css";
const ProductExclusion = () => {
  // State for products
  const [geoDetails, setGeoDetails] = useState([
    { id: 1, product_id: "PRO123", name: "Electronics -TRF" },
    { id: 2, product_id: "PRO561", name: "Electronics - PFY" },
  ]);
  const [newsetGeoDetailId, setNewsetGeoDetailId] = useState("");
  const [newsetGeoDetailName, setNewGeoDetailName] = useState("");
  const [newsetGeoDetailSubName, setNewGeoDetailSubName] = useState("");

  const [searchsetGeoDetails, setSearchsetGeoDetails] = useState("");

  // State for THUs
  const [behaviourDetails, setBehaviourDetails] = useState([
    { id: 1, thu_id: "THU011", name: "Widget A" },
    { id: 2, thu_id: "THU041", name: "Widget B" },
  ]);
  const [newBehaviourDetails, setNewBehaviourDetails] = useState("");
  const [searchBehaviourDetails, setSearchBehaviourDetails] = useState("");

  const [showAddBehaviourDetailsForm, setShowAddBehaviourDetailsForm] =
    useState(false);
  // Add a new product
  const addProduct = () => {
    if (
      newsetGeoDetailId.trim() &&
      newsetGeoDetailName.trim() &&
      newsetGeoDetailSubName.trim()
    ) {
      setGeoDetails([
        ...geoDetails,
        {
          id: Date.now(),
          name: setGeoDetails,
          serviceId: newsetGeoDetailName,
          serviceName: newsetGeoDetailSubName,
        },
      ]);
      setNewsetGeoDetailId("");
      setNewGeoDetailName("");
      setNewGeoDetailSubName("");
    }
  };

  // Remove a product by ID
  const removeProduct = (productId) => {
    setGeoDetails(geoDetails.filter((product) => product.id !== productId));
  };

  // Add a new THU
  const addTHU = () => {
    if (newBehaviourDetails.trim()) {
      setBehaviourDetails([
        ...behaviourDetails,
        { id: Date.now(), name: newBehaviourDetails },
      ]);
      setNewBehaviourDetails("");
      setShowAddBehaviourDetailsForm(false); // Hide the form after adding
    }
  };

  const toggleAddTHUForm = () => {
    setShowAddBehaviourDetailsForm(!showAddBehaviourDetailsForm);
  };

  // Filter products based on search input
  const filteredProducts = geoDetails.filter((product) =>
    product.name.toLowerCase().includes(searchsetGeoDetails.toLowerCase())
  );

  // Filter THUs based on search input
  const filteredTHUs = behaviourDetails.filter((thu) =>
    thu.name.toLowerCase().includes(searchBehaviourDetails.toLowerCase())
  );

  return (
    <div className="container">
      <div className="Service">
        <div className="addService">
          <h4>Add a new Product</h4>

          <label>Service ID*</label>
          <br />
          <input
            type="text"
            placeholder="Product Name"
            value={newsetGeoDetailId}
            onChange={(e) => setNewsetGeoDetailId(e.target.value)}
          />
          <br />
          <br />
          <label>Service Name*</label>
          <br />
          <input
            type="text"
            placeholder="Service ID"
            value={newsetGeoDetailName}
            onChange={(e) => setNewGeoDetailName(e.target.value)}
          />
          <label>Sub Service Name*</label>
          <input
            type="text"
            placeholder="Service Name"
            value={newsetGeoDetailSubName}
            onChange={(e) => setNewGeoDetailSubName(e.target.value)}
          />

          <button className="AddButton" onClick={addProduct}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-plus-lg"
              viewBox="0 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"
              />
            </svg>
          </button>
        </div>
      </div>
      <table className="table">
        <div className="First-Table">
          <div className="Details">
            <h5>Geo Details</h5>
            <div className="right-side">
              <div className="Search">
                <input
                  className="Input"
                  type="text"
                  placeholder="Search services"
                  value={searchsetGeoDetails}
                  onChange={(e) => setSearchsetGeoDetails(e.target.value)}
                />
                <div className="Search1">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-search"
                    viewBox="0 0 16 16"
                  >
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                  </svg>
                </div>
              </div>
              <div className="Add">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-plus-lg"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"
                  />
                </svg>
              </div>

              <div className="Delete">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-trash3"
                  viewBox="0 0 16 16"
                >
                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                </svg>
              </div>
              <div className="Dowload">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-download"
                  viewBox="0 0 16 16"
                >
                  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                </svg>
              </div>
              <div className="Up">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-chevron-up"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708z"
                  />
                </svg>
              </div>
              <div></div>
            </div>
          </div>

          <div className="Geo-Table-Head">
            <thead>
              <tr className="Geo-Table-Row">
                <th scope="col">No</th>
                <th scope="col">Product ID</th>
                <th scope="col">Product Name</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
          </div>
          <tbody>
            <div className="Geo-Table-Body">
              {filteredProducts.map((product, index) => (
                <tr className="Geo-Table-Description" key={product.id}>
                  <td>{index + 1}</td>
                  <td>{product.product_id}</td>
                  <td>{product.name}</td>
                  <td>
                    <div className="Edit-Delete">
                      <div className="Edit">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-pencil"
                          viewBox="0 0 16 16"
                        >
                          <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325" />
                        </svg>
                      </div>
                      <button
                        className="Trash"
                        onClick={() => removeProduct(product.id)}
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-trash3"
                          viewBox="0 0 16 16"
                        >
                          <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </div>
          </tbody>
        </div>
      </table>

      {/* ............................................................................ */}
      <table className="table">
        <div className="First-Table">
          <div className="Details">
            <h5>Behavior Details (Change Sequence)</h5>
            <div className="right-side">
              <div className="Search">
                <input
                  className="Input"
                  type="text"
                  placeholder="Search services"
                  value={searchBehaviourDetails}
                  onChange={(e) => setSearchBehaviourDetails(e.target.value)}
                />
                <div className="Search1">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-search"
                    viewBox="0 0 16 16"
                  >
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                  </svg>
                </div>
              </div>

              <div
                className="Add"
                onClick={toggleAddTHUForm}
                style={{ cursor: "pointer" }}
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-plus-lg"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"
                  />
                </svg>
              </div>

              <div className="Delete">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-trash3"
                  viewBox="0 0 16 16"
                >
                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                </svg>
              </div>
              <div className="Dowload">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-download"
                  viewBox="0 0 16 16"
                >
                  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                </svg>
              </div>
              <div className="Up">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-chevron-up"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708z"
                  />
                </svg>
              </div>
              <div></div>
            </div>
          </div>

          <div className="Geo-Table-Head">
            <thead>
              <tr className="Geo-Table-Row">
                <th scope="col">No</th>
                <th scope="col">THU ID</th>
                <th scope="col">THU Name</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
          </div>
          <tbody>
            <div className="Geo-Table-Body">
              {filteredTHUs.map((thu, index) => (
                <tr className="Geo-Table-Description" key={thu.id}>
                  <td>{index + 1}</td>
                  <td>{thu.thu_id}</td>
                  <td>{thu.name}</td>
                  {/* <td>{product.name}</td> */}
                  <td>
                    <div className="Edit-Delete">
                      <div className="Edit">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-pencil"
                          viewBox="0 0 16 16"
                        >
                          <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325" />
                        </svg>
                      </div>
                      <button
                        className="Trash"
                        onClick={() => removeProduct(thu.id)}
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-trash3"
                          viewBox="0 0 16 16"
                        >
                          <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </div>
          </tbody>
        </div>
      </table>
      {/* //..................................................................................... */}

      {showAddBehaviourDetailsForm && (
        <div className="add-thu-form">
          <h4>Add</h4>
          <input
            type="text"
            placeholder="THU Name"
            value={newBehaviourDetails}
            onChange={(e) => setNewBehaviourDetails(e.target.value)}
          />
          <button onClick={addTHU}>Add</button>
        </div>
      )}
    </div>
  );
};

export default ProductExclusion;
